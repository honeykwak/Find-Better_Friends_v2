### 데이터 구조 변경에 따른 분석 및 위험 요소 보고서

---

### 1. 분석 요약

제안된 새로운 데이터 구조(`proposals.json`, `validators.json`, `votes.json`)가 기존 애플리케이션의 모든 기능을 지원할 수 있는지 비판적으로 검토한 결과, **치명적인 기능적 한계**가 발견되었습니다.

새로운 구조는 메인 히트맵(`ValidatorHeatmap`)을 렌더링하는 데는 충분하지만, 애플리케이션의 또 다른 핵심 축인 **필터 패널(`FilterPanel`)의 기능을 거의 무력화시키는 심각한 위험**을 내포하고 있습니다.

### 2. 기능별 상세 분석 및 위험 평가

#### 가. ValidatorHeatmap (히트맵)

*   **상태:** **안전 (Low Risk)**
*   **분석:** 이 컴포넌트는 제안, 검증인, 투표의 관계를 시각화하는 것이 주 목적입니다. 우리가 설계한 3개의 정규화된 JSON 파일은 이 기능을 수행하기 위한 모든 필수 정보를 제공합니다.
*   **사소한 우려:** 기존 코드는 클라이언트 측에서 투표 참여 횟수를 기준으로 검증인을 동적으로 정렬합니다. ��적화된 구조에서도 이는 가능하지만, 데이터 양에 따라 약간의 성능 저하가 발생할 수 있습니다. 이는 추후 서버 사이드에서 정렬 순서를 미리 계산해주는 방식으로 추가 최적화가 가능합니다.

#### 나. FilterPanel (필터 패널)

*   **상태:** **심각 (Critical Risk)**
*   **분석:** 필터 패널은 단순한 필터링 도구가 아니라, **사전에 복잡하게 계산된 통계 정보를 사용자에게 제공하는 핵심적인 분석 UI**입니다. 이 패널은 다음과 같은 사전 계산 데이터에 전적으로 의존합니다.
    *   **카테고리/토픽별 계층 구조:** 어떤 카테고리에 어떤 토픽들이 속해있는지에 대한 정보.
    *   **항목별 통계:** 각 카테고리와 토픽에 대해,
        *   포함된 제안의 총 개수 (`count`)
        *   제안의 통과율 (`passRate`)
        *   투표 수 분포 (`voteDistribution`)
        *   **투표력(Voting Power) 분포** (`votingPowerDistribution`)
*   **치명적 문제:** 현재 우리가 생성하기로 계획한 `proposals.json`, `validators.json`, `votes.json` 파일에는 이러한 **그룹화된 통계 정보가 전혀 포함되어 있지 않습니다.** 이 데이터는 원본 데이터를 기반으로 별도의 계산 과정을 거쳐야만 생성될 수 있습��다.
*   **예상 결과:** 이 데이터 없이는 필터 패널은 껍데기만 남게 됩니다. 사용자는 어떤 카테고리가 있는지, 각 카테고리의 중요도나 성향이 어떤지 전혀 파악할 수 없으므로 사실상 필터링 기능을 제대로 사용할 수 없게 됩니다.

### 3. 결론 및 해결을 위한 필수 권장 사항

현재의 데이터 최적화 계획은 **불완전하며, 그대로 진행할 경우 애플리케이션의 핵심 기능 상실을 초래**합니다.

이 문제를 해결하고 프로젝트 목표를 성공적으로 달성하기 위해, 데이터 정제 전략을 다음과 같이 **반드시 확장**해야 합니다.

**필수 추가 요구사항:**

데이터 가공 스크립트는 기존 3종류의 파일 외에, 필터 패널을 위한 **네 번째 요약(Summary) 파일을 반드시 함께 생성**해야 합니다.

*   **파일명:** `public/data/{chain_id}/category_summary.json`
*   **목적:** 필터 패널이 요구하는 모든 사전 계산된 통계 정보를 제공합니다.
*   **기대 구조:**
    ```json
    {
      "categories": {
        "SoftwareUpgrade": {
          "count": 15,
          "passRate": 86.7,
          "voteDistribution": { "YES": 500, ... },
          "votingPowerDistribution": { "YES": 1234567.89, ... }
        }
      },
      "topics": {
        "Feature Addition": {
          "category": "SoftwareUpgrade",
          "count": 8,
          "passRate": 90.0,
          ...
        }
      }
    }
    ```

### 4. 다음 단계 제안

1.  `OPTIMIZATION_PLAN.md` 파일을 열어, 이 보고서에서 식별된 `category_summary.json` 생성 요구사항을 공식적으로 추가하여 계획을 업데이트합니다.
2.  데이터 가공 스크립트(`scripts/optimizeData.js`)의 로직을 확장하여, 기본 데이터 3종과 함께 이 네 번째 요약 파일도 생성하도록 수정합니다.
3.  수정된 스크립트를 실행하여 완전한 데이터 세트를 생성합니다.
4.  이후 API 및 프론트엔드 코드를 수정합니다.
